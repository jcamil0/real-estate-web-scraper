<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>DATA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />

    <link rel="stylesheet" href="assets/css/animate.min.css" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/font-awesome.min.css" />
    <link
      href="//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700,800"
      rel="stylesheet"
      type="text/css"
    />

    <script
      src="https://code.jquery.com/jquery-2.2.4.min.js"
      integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"
    ></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"
    ></script>
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      .center-screen {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 100vh;
      }
      .container {
        text-align: center;
        width: auto;
        margin: 0 auto;
      }

      #menu {
        margin: 0 auto;
        display: inline-block;
        list-style: none;
        padding: 0;
        border-top: 1 solid #ccc;
        border-left: 1 solid #ccc;
        border-bottom: 1 solid #ccc;
      }

      #menu li {
        float: left;
        background-color: #f2f2f2;
      }

      #menu li a {
        display: block;
        padding: 10px 10px;
        text-decoration: none;
        color: #069;
        border-right: 1px solid #ccc;
        font-weight: bold;
      }

      #menu li a:hover {
        color: #c00;
        background-color: #fff;
      }
    </style>
  </head>

  <body>
    <div class="center-screen">
      <h1>data</h1>
      <div class="container">
        <ul id="menu">
          <li><a href="/norte">norte</a></li>
          <li><a href="/sur">sur</a></li>
          <li><a href="/oeste">oeste</a></li>
          <li><a href="/orinete">orinete</a></li>
          <li><a href="/centro">centro</a></li>
        </ul>
      </div>
    </div>

    <!-- -------------------------------------------- -->
    <div class="center-screen">
      Subir archivo<br />
      <input type="file" id="files" multiple /><br /><br />
      <button id="send">Subir</button>
      <p id="uploading"></p>
      <progress value="0" max="100" id="progress"></progress>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-storage.js"></script>

    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyC9fdBoMoZeFb8jqKdiHjm4iyLCpzllL6g",
        authDomain: "dpow-4c98e.firebaseapp.com",
        databaseURL: "https://dpow-4c98e-default-rtdb.firebaseio.com",
        projectId: "dpow-4c98e",
        storageBucket: "dpow-4c98e.appspot.com",
        messagingSenderId: "985255365057",
        appId: "1:985255365057:web:8af2560ad58d2ce29a8740",
        measurementId: "G-QX28B43LLP",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>

    <script>
      var files = [];
      document.getElementById("files").addEventListener("change", function (e) {
        files = e.target.files;
        console.log("askjaskj", files);
        for (let i = 0; i < files.length; i++) {
          console.log("asdkjaskjd", files[i]);
        }
      });

      document.getElementById("send").addEventListener("click", function () {
        if (files.length != 0) {
          //Loops through all the selected files
          for (let i = 0; i < files.length; i++) {
            //create a storage reference
            var storage = firebase.storage().ref(files[i].name);

            //upload file
            var upload = storage.put(files[i]);

            //update progress bar
            upload.on(
              "state_changed",
              function progress(snapshot) {
                var percentage =
                  (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                document.getElementById("progress").value = percentage;
              },

              function error() {
                alert("error uploading file");
              },

              function complete() {
                document.getElementById(
                  "uploading"
                ).innerHTML += `${files[i].name} upoaded <br />`;
              }
            );
          }
        } else {
          alert("No file chosen");
        }
      });

      function getFileUrl(filename) {
        //create a storage reference
        var storage = firebase.storage().ref(filename);

        //get file url
        storage
          .getDownloadURL()
          .then(function (url) {
            console.log(url);
          })
          .catch(function (error) {
            console.log("error encountered");
          });
      }
    </script>
  </body>
</html>
